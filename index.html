<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Document</title>

	<script src="scripts/services/user-services.js"></script>
	<script src="scripts/services/book-services.js"></script>
	<script src="scripts/models/user.js"></script>
	<script src="scripts/components/register-form.js"></script>
	<script src="scripts/components/login-form.js"></script>
	<script src="scripts/components/UnauthorizedScreenComponent.js"></script>
	<script src="scripts/components/LoginScreenComponent.js"></script>
	<script src="scripts/script.js"></script>
	<script src="scripts/components/list-contacts.js"></script>
	<script src="scripts/components/exit-book.js"></script>
	<script>
		let userServices = new UserServices();
		userServices.getAll().then(users => console.log(users));
		let loginScreen = new LoginScreenComponent('.contactBook');
		//loginScreen.hidden(true);

		let unauthorizedScreen = new UnauthorizedScreenComponent('.unauthorized-screen');



		let registerForm = new RegisterForm('.register-form', userServices);
		registerForm.onRegister = () => {
			alert('Register status OK');
		};

		let loginForm = new LoginForm('.login-form', userServices);
		let bookServices = new BookServices();
		let listContacts = new ListContacts('.contactBook-list__items', bookServices.getContacts());
		let exitBook = new ExitBook('.contactBook-header__exit');



		//loginScreen.hidden(true);

		loginForm.onLogin = () => {
			loginScreen.show('grid');
			//alert('Login OK, it is handler');
			unauthorizedScreen.hidden(true);

			bookServices.userName();
			exitBook.exit();

			// let contact = {
			// 	type: 'email',
			// 	value: 'Ivan@gmail.com',
			// 	name: 'Ivan',
			// }
			// let contact = {
			// 	type: 'phone',
			// 	value: '4646464',
			// 	name: 'Ivan',
			// }
			// bookServices.addContact(contact).then(response => {
			// 	if(response.status === 'error') alert('no added contact');
			// 	else alert('contact added ok');
			// });


			listContacts.showContacts();
			bookServices.getContacts()
					.then(request => request.contacts)
					.then(contacts => contacts.map(contact => {
						console.log('contacts');
						console.log(contact)
					}));

			//bookServices.getAll();
		};


	</script>
	<link rel="stylesheet" href="style.css">
</head>
<body>
<header class="header">
	<h1 class="header__logo">
		MyPhoneBook
	</h1>
</header>
<div class="unauthorized-screen">
	<div class="row">
		<div class="row__col">
			<div class="form register-form">
				<div class="form__header">Register</div>
				<div class="form__body">
					<div class="form__control">
						<label for="register_user_login">Login</label>
						<input type="text" class="input" id="register_user_login" value="">
					</div>
					<div class="form__control">
						<label for="register_user_password">Password</label>
						<input type="text" class="input" id="register_user_password" value="1111">
					</div>
					<div class="form__control">
						<label for="register_user_born">Birth day</label>
						<input type="text" class="input" id="register_user_born" value="2000-01-01">
					</div>
					<div class="form__control">
						<button class="btn btn_success">Register</button>
					</div>
				</div>
			</div>
		</div>
		<div class="row__col">
			<div class="form">
				<div class="form login-form">
					<div class="form__header">Login</div>
					<div class="form__body">
						<div class="form__control">
							<label for="login_user_login">Login</label>
							<input type="text" class="input" id="login_user_login" value="12">
						</div>
						<div class="form__control">
							<label for="login_user_password">Password</label>
							<input type="text" class="input" id="login_user_password" value="12">
						</div>
						<div class="form__control">
							<button class="btn btn_success">Login</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="contactBook">
	<diw class="contactBook__header contactBook-header">
		<h2 class="contactBook-header__title">
			Пользователь <span class="contactBook-header__user">User</span>
		</h2>
		<button class="contactBook-header__exit">Выход</button>
	</diw>


	<div class="contactBook__list contactBook-list">
		<h3 class="contactBook-list__title">
			Список контактов
		</h3>
		<div class="contactBook-list__list">
			<ul class="contactBook-list__items">
				<li class="contactBook-list__item contactBook-item">
					<button class="contactBook-item__button"></button>
				</li>
			</ul>
		</div>
	</div>

	<div class="contactBook__about contactBook-about">
		<div class="contactBook-about__content">
			<p class="contactBook-content__name">
				Имя: <span>Valera</span>
			</p>
			<p class="contactBook-content__telephone">
				Телефон: <a href="tel:+74951111111">+7 (495) 111-11-11</a>
			</p>
			<p class="contactBook-content__email">
				Почта: <a href="mailto:example@gmail.com">example@gmail.com</a>
			</p>
		</div>		
		<button class="contactBook-about__exit">Закрыть</button>
	</div>

	<div class="contactBook__add contactBook-add">
		<div class="contactBook-add__form">
			<h3 class="contactBook-add__title">
				Добавить контакт
			</h3>
			<div class="contactBook-add__control">
				<label for="contactBook-add__name">Имя</label>
				<input type="text" class="contactBook-add__name" id="contactBook-add__name" value="Venia">
			</div>
			<div class="contactBook-add__control">
				<select class="select contactBook-add__select">
					<option value="phone">телефон</option>
					<option value="email">электронная почта</option>
				</select>
			</div>
			<div class="contactBook-add__control">
				<label for="contactBook-add__phone">телефон</label>
				<input type="text" class="contactBook-add__phone" id="contactBook-add__phone" value="380958398798">
			</div>
			<div class="contactBook-add__control">
				<label for="contactBook-add__mail">электронная почта</label>
				<input type="text" class="contactBook-add__mail" id="contactBook-add__mail" value="mail@gmail.com">
			</div>
			<div class="contactBook-add__control">
				<button class="btn contactBook-add__btn">Добавить контакт</button>
			</div>
		</div>
	</div>
</div>

</body>
</html>